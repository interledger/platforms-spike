import React, { useState, useEffect } from "react";
import Link from "next/link";
import Image from "next/image";
import data from "../data/home.json";
import contributors from "../data/contributors.json";
import styles from "./index.module.css";

export default function Index() {
  const CardList = (props) => {
    return props.cards?.map(({ name, image, link, desc }) => {
      if (desc) {
        return (
          <a
            key={name}
            href={link}
            target="_blank"
            rel="noreferrer noopener"
            className={`${styles.card} ${styles.cardWide}`}
          >
            <Image
              className={styles.cardLogo}
              src={`/img/${image}`}
              alt={name}
              width="96"
              height="96"
            />
            <div className={styles.cardContent}>
              <h3 className={styles.bodyText}>{name}</h3>
              <p>{desc}</p>
            </div>
          </a>
        );
      } else {
        return (
          <a
            href={link}
            target="_blank"
            rel="noreferrer noopener"
            key={name}
            className={`${styles.card} ${styles.cardBasic}`}
          >
            <Image src={`/img/${image}`} alt={name} width="267" height="78" />
          </a>
        );
      }
    });
  };
  const PrCta = (props) => {
    return (
      <div className={styles.cta}>
        <img className={styles.iconMerge} src="/img/icon-merge.svg" alt="" />
        <p>
          Do you know another {props.label}?{" "}
          <a
            href="https://github.com/WICG/webmonetization/edit/main/docusaurus.config.js"
            target="_blank"
            rel="noreferrer noopener"
          >
            Make a PR
          </a>
        </p>
      </div>
    );
  };
  return (
    <main>
      <section className={`${styles.hero} ${styles.section}`}>
        <div className={styles.contentWrapperSm}>
          <Image
            alt="Web Monetization Icon"
            className={styles.heroIcon}
            src="img/wm-logo--animated.svg"
            width="120"
            height="86"
          />
          <h1 className={styles.heading2}>Web Monetization</h1>
          <p className={`${styles.heroTagline} ${styles.heading4}`}>
            The Web Monetization API allows websites to automatically and
            passively receive payments from Web Monetization-enabled visitors.
          </p>
        </div>
        <footer className={styles.heroFooter}>
          <div className={styles.contentWrapperSm}>
            <p>
              Web Monetization is being proposed as a W3C standard at{" "}
              <a
                href="https://discourse.wicg.io/t/proposal-web-monetization-a-new-revenue-model-for-the-web/3785"
                rel="noreferrer noopener"
                target="_blank"
              >
                the Web Platform Incubator Community Group
              </a>
              .
            </p>
          </div>
        </footer>
      </section>
      <section className={styles.section}>
        <div className={`${styles.contentWrapperLg} ${styles.twoColGrid}`}>
          <div className={styles.gridItem}>
            <h2 className={styles.heading3}>Motivation</h2>
            <p>
              The ability to transfer money has been a long-standing omission
              from the web platform. As a result, the web suffers from a flood
              of advertising and broken business models. Web Monetization
              provides an open, native, efficient, and automatic way to
              compensate creators, pay for content, and support crucial web
              infrastructure.
            </p>
          </div>
          <div className={styles.gridItem}>
            <h2 className={styles.heading3}>Why Now?</h2>
            <p>
              Until recently, there hasn't been an open, neutral and
              cost-efficient protocol for transferring money.{" "}
              <a
                href="https://interledger.org"
                rel="noreferrer noopener"
                target="_blank"
              >
                Interledger
              </a>{" "}
              provides a simple, interoperable, and currency-agnostic method for
              the transfer of small amounts of money. This opens up the
              possibility for streaming money, which makes more Web Monetization
              use cases possible for the first time.
            </p>
          </div>
        </div>
      </section>
      <section className={styles.section}>
        <div className={`${styles.contentWrapperLg} ${styles.twoColGrid}`}>
          {data.wallets.length > 0 && (
            <div className={styles.gridItem}>
              <div className={styles.sectionHeader}>
                <h2 className={styles.heading3}>Web Monetization Wallets</h2>
                <p>
                  These providers offer ILP-enabled wallets that you can use to
                  become Web Monetized:
                </p>
              </div>
              <div className={styles.cards}>
                <CardList cards={data.wallets} />
              </div>
              <PrCta label="wallet" />
            </div>
          )}
          {data.search.length > 0 && (
            <div className={styles.gridItem}>
              <div className={styles.sectionHeader}>
                <h2 className={styles.heading3}>
                  Web Monetization Enabled Search Engines
                </h2>
                <p>These search engines implement Web Monetization features:</p>
              </div>
              <div className={styles.cards}>
                <CardList cards={data.search} />
              </div>
              <PrCta label="search engine" />
            </div>
          )}
        </div>
      </section>
      {data.providers.length > 0 && (
        <section className={styles.section}>
          <div className={styles.contentWrapperLg}>
            <div className={styles.sectionHeader}>
              <h2 className={styles.heading3}>Web Monetization Providers</h2>
              <p>These providers offer Web Monetization services:</p>
            </div>
            <div className={styles.cards}>
              <CardList cards={data.providers} />
            </div>
            <PrCta label="provider" />
          </div>
        </section>
      )}
      {data.browsers.length > 0 && (
        <section className={styles.section}>
          <div className={styles.contentWrapperLg}>
            <div className={styles.sectionHeader}>
              <h2 className={styles.heading3}>
                Web Monetization Supported Browsers
              </h2>
              <p>
                These browsers implement Web Monetization natively or via an
                extension:
              </p>
            </div>
            <div className={styles.cards}>
              <CardList cards={data.browsers} />
            </div>
            <PrCta label="browser" />
          </div>
        </section>
      )}
      {data.tools.length > 0 && (
        <section className={styles.section}>
          <div className={styles.contentWrapperLg}>
            <div className={styles.sectionHeader}>
              <h2 className={styles.heading3}>Web Monetization Tools</h2>
              <p>These tools enable Web Monetization features:</p>
            </div>
            <div className={styles.cards}>
              <CardList cards={data.tools} />
            </div>
            <PrCta label="tool" />
          </div>
        </section>
      )}
      <section className={styles.section}>
        <div className={styles.contentWrapperLg}>
          <h2 className={styles.heading3}>Resources</h2>
          <div className={styles.fourColGrid}>
            <div className={styles.gridItem}>
              <h3 className={styles.heading4}>Documentation</h3>
              <p>Resource on how to add Web Monetization to your site.</p>
              <Link href="/docs/web-monetization-api">Read docs ›</Link>
            </div>
            <div className={styles.gridItem}>
              <h3 className={styles.heading4}>Explainer</h3>
              <p>The explainer submitted to the W3C.</p>
              <Link href="/docs/explainer">Read explainer ›</Link>
            </div>
            <div className={styles.gridItem}>
              <h3 className={styles.heading4}>Specification</h3>
              <p>The formal specification.</p>
              <Link href="/specification">Read specs ›</Link>
            </div>
            <div className={styles.gridItem}>
              <h3 className={styles.heading4}>
                <Image
                  src={`/img/awesome-badge.svg`}
                  alt=""
                  width="86"
                  height="20"
                />
              </h3>
              <p>
                An{" "}
                <a
                  href="https://github.com/sindresorhus/awesome#readme"
                  target="_blank"
                  rel="noreferrer noopener"
                >
                  awesome
                </a>{" "}
                list of additional Web Monetization resources.
              </p>
              <a
                href="https://github.com/thomasbnt/awesome-web-monetization"
                target="_blank"
                rel="noreferrer noopener"
              >
                View list ›
              </a>
            </div>
          </div>
        </div>
      </section>
      <section className={styles.section}>
        <div className={styles.contentWrapperLg}>
          <div className={styles.sectionHeader}>
            <h2 className={styles.heading3}>Contributors</h2>
            <p>Thank you to all our contributors.</p>
          </div>
          {contributors.length > 0 && (
            <ul className={styles.contributors}>
              {contributors.map((contributor) => (
                <li key={contributor.id} className={styles.contributor}>
                  <a href={contributor.html_url}>
                    <img alt={contributor.login} src={contributor.avatar_url} />
                  </a>
                </li>
              ))}
            </ul>
          )}
        </div>
      </section>
    </main>
  );
}
